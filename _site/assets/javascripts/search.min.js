!function(){var e=function(n){var r=new e.Index;return r.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),n&&n.call(r,r),r};e.version="0.5.3",e.utils={},e.utils.warn=function(e){return function(n){e.console&&console.warn&&console.warn(n)}}(this),e.EventEmitter=function(){this.events={}},e.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},e.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);this.events[e].splice(n,1),this.events[e].length||delete this.events[e]}},e.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)})}},e.EventEmitter.prototype.hasHandler=function(e){return e in this.events},e.tokenizer=function(e){if(!arguments.length||null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return e.toLowerCase()});for(var t=e.toString().replace(/^\s+/,""),n=t.length-1;n>=0;n--)if(/\S/.test(t.charAt(n))){t=t.substring(0,n+1);break}return t.split(/\s+/).map(function(e){return e.toLowerCase()})},e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions={},e.Pipeline.registerFunction=function(n,r){r in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+r),n.label=r,e.Pipeline.registeredFunctions[n.label]=n},e.Pipeline.warnIfFunctionNotRegistered=function(n){var r=n.label&&n.label in this.registeredFunctions;r||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",n)},e.Pipeline.load=function(n){var r=new e.Pipeline;return n.forEach(function(n){var i=e.Pipeline.registeredFunctions[n];if(!i)throw new Error("Cannot load un-registered function: "+n);r.add(i)}),r},e.Pipeline.prototype.add=function(){var n=Array.prototype.slice.call(arguments);n.forEach(function(n){e.Pipeline.warnIfFunctionNotRegistered(n),this._stack.push(n)},this)},e.Pipeline.prototype.after=function(n,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(n)+1;this._stack.splice(i,0,r)},e.Pipeline.prototype.before=function(n,r){e.Pipeline.warnIfFunctionNotRegistered(r);var i=this._stack.indexOf(n);this._stack.splice(i,0,r)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,r=this._stack.length,i=0;n>i;i++){for(var s=e[i],o=0;r>o&&(s=this._stack[o](s,i,e),void 0!==s);o++);void 0!==s&&t.push(s)}return t},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(n){return e.Pipeline.warnIfFunctionNotRegistered(n),n.label})},e.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},e.Vector.Node=function(e,t,n){this.idx=e,this.val=t,this.next=n},e.Vector.prototype.insert=function(n,r){var i=this.list;if(!i)return this.list=new e.Vector.Node(n,r,i),this.length++;for(var s=i,o=i.next;void 0!=o;){if(n<o.idx)return s.next=new e.Vector.Node(n,r,o),this.length++;s=o,o=o.next}return s.next=new e.Vector.Node(n,r,o),this.length++},e.Vector.prototype.magnitude=function(){if(this._magniture)return this._magnitude;for(var e,t=this.list,n=0;t;)e=t.val,n+=e*e,t=t.next;return this._magnitude=Math.sqrt(n)},e.Vector.prototype.dot=function(e){for(var t=this.list,n=e.list,r=0;t&&n;)t.idx<n.idx?t=t.next:t.idx>n.idx?n=n.next:(r+=t.val*n.val,t=t.next,n=n.next);return r},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.SortedSet=function(){this.length=0,this.elements=[]},e.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},e.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(e){~this.indexOf(e)||this.elements.splice(this.locationFor(e),0,e)},this),this.length=this.elements.length},e.SortedSet.prototype.toArray=function(){return this.elements.slice()},e.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},e.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},e.SortedSet.prototype.indexOf=function(e,t,n){var t=t||0,n=n||this.elements.length,r=n-t,i=t+Math.floor(r/2),s=this.elements[i];return 1>=r?s===e?i:-1:e>s?this.indexOf(e,i,n):s>e?this.indexOf(e,t,i):s===e?i:void 0},e.SortedSet.prototype.locationFor=function(e,t,n){var t=t||0,n=n||this.elements.length,r=n-t,i=t+Math.floor(r/2),s=this.elements[i];if(1>=r){if(s>e)return i;if(e>s)return i+1}return e>s?this.locationFor(e,i,n):s>e?this.locationFor(e,t,i):void 0},e.SortedSet.prototype.intersect=function(n){for(var r=new e.SortedSet,i=0,s=0,o=this.length,u=n.length,a=this.elements,f=n.elements;;){if(i>o-1||s>u-1)break;a[i]!==f[s]?a[i]<f[s]?i++:a[i]>f[s]&&s++:(r.add(a[i]),i++,s++)}return r},e.SortedSet.prototype.clone=function(){var n=new e.SortedSet;return n.elements=this.toArray(),n.length=n.elements.length,n},e.SortedSet.prototype.union=function(e){var t,n,r;return this.length>=e.length?(t=this,n=e):(t=e,n=this),r=t.clone(),r.add.apply(r,n.toArray()),r},e.SortedSet.prototype.toJSON=function(){return this.toArray()},e.Index=function(){this._fields=[],this._ref="id",this.pipeline=new e.Pipeline,this.documentStore=new e.Store,this.tokenStore=new e.TokenStore,this.corpusTokens=new e.SortedSet,this.eventEmitter=new e.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},e.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},e.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},e.Index.load=function(n){n.version!==e.version&&e.utils.warn("version mismatch: current "+e.version+" importing "+n.version);var r=new this;return r._fields=n.fields,r._ref=n.ref,r.documentStore=e.Store.load(n.documentStore),r.tokenStore=e.TokenStore.load(n.tokenStore),r.corpusTokens=e.SortedSet.load(n.corpusTokens),r.pipeline=e.Pipeline.load(n.pipeline),r},e.Index.prototype.field=function(e,t){var t=t||{},n={name:e,boost:t.boost||1};return this._fields.push(n),this},e.Index.prototype.ref=function(e){return this._ref=e,this},e.Index.prototype.add=function(n,r){var i={},s=new e.SortedSet,o=n[this._ref],r=void 0===r?!0:r;this._fields.forEach(function(r){var o=this.pipeline.run(e.tokenizer(n[r.name]));i[r.name]=o,e.SortedSet.prototype.add.apply(s,o)},this),this.documentStore.set(o,s),e.SortedSet.prototype.add.apply(this.corpusTokens,s.toArray());for(var u=0;u<s.length;u++){var a=s.elements[u],f=this._fields.reduce(function(e,t){var n=i[t.name].length;if(!n)return e;var r=i[t.name].filter(function(e){return e===a}).length;return e+r/n*t.boost},0);this.tokenStore.add(a,{ref:o,tf:f})}r&&this.eventEmitter.emit("add",n,this)},e.Index.prototype.remove=function(e,t){var n=e[this._ref],t=void 0===t?!0:t;if(this.documentStore.has(n)){var r=this.documentStore.get(n);this.documentStore.remove(n),r.forEach(function(e){this.tokenStore.remove(e,n)},this),t&&this.eventEmitter.emit("remove",e,this)}},e.Index.prototype.update=function(e,t){var t=void 0===t?!0:t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},e.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var n=this.tokenStore.count(e),r=1;return n>0&&(r=1+Math.log(this.tokenStore.length/n)),this._idfCache[t]=r},e.Index.prototype.search=function(n){var r=this.pipeline.run(e.tokenizer(n)),i=new e.Vector,s=[],o=this._fields.reduce(function(e,t){return e+t.boost},0),u=r.some(function(e){return this.tokenStore.has(e)},this);if(!u)return[];r.forEach(function(n,r,u){var a=1/u.length*this._fields.length*o,f=this,l=this.tokenStore.expand(n).reduce(function(r,s){var o=f.corpusTokens.indexOf(s),u=f.idf(s),l=1,c=new e.SortedSet;if(s!==n){var p=Math.max(3,s.length-n.length);l=1/Math.log(p)}return o>-1&&i.insert(o,a*u*l),Object.keys(f.tokenStore.get(s)).forEach(function(e){c.add(e)}),r.union(c)},new e.SortedSet);s.push(l)},this);var a=s.reduce(function(e,t){return e.intersect(t)});return a.map(function(e){return{ref:e,score:i.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})},e.Index.prototype.documentVector=function(n){for(var r=this.documentStore.get(n),i=r.length,s=new e.Vector,o=0;i>o;o++){var u=r.elements[o],a=this.tokenStore.get(u)[n].tf,f=this.idf(u);s.insert(this.corpusTokens.indexOf(u),a*f)}return s},e.Index.prototype.toJSON=function(){return{version:e.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},e.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.Store=function(){this.store={},this.length=0},e.Store.load=function(n){var r=new this;return r.length=n.length,r.store=Object.keys(n.store).reduce(function(r,i){return r[i]=e.SortedSet.load(n.store[i]),r},{}),r},e.Store.prototype.set=function(e,t){this.store[e]=t,this.length=Object.keys(this.store).length},e.Store.prototype.get=function(e){return this.store[e]},e.Store.prototype.has=function(e){return e in this.store},e.Store.prototype.remove=function(e){this.has(e)&&(delete this.store[e],this.length--)},e.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",r="[aeiouy]",i=n+"[^aeiouy]*",s=r+"[aeiou]*",o="^("+i+")?"+s+i,u="^("+i+")?"+s+i+"("+s+")?$",a="^("+i+")?"+s+i+s+i,f="^("+i+")?"+r;return function(n){var s,c,p,d,v,m,g;if(n.length<3)return n;if(p=n.substr(0,1),"y"==p&&(n=p.toUpperCase()+n.substr(1)),d=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,d.test(n)?n=n.replace(d,"$1$2"):v.test(n)&&(n=n.replace(v,"$1$2")),d=/^(.+?)eed$/,v=/^(.+?)(ed|ing)$/,d.test(n)){var y=d.exec(n);d=new RegExp(o),d.test(y[1])&&(d=/.$/,n=n.replace(d,""))}else if(v.test(n)){var y=v.exec(n);s=y[1],v=new RegExp(f),v.test(s)&&(n=s,v=/(at|bl|iz)$/,m=new RegExp("([^aeiouylsz])\\1$"),g=new RegExp("^"+i+r+"[^aeiouwxy]$"),v.test(n)?n+="e":m.test(n)?(d=/.$/,n=n.replace(d,"")):g.test(n)&&(n+="e"))}if(d=/^(.+?[^aeiou])y$/,d.test(n)){var y=d.exec(n);s=y[1],n=s+"i"}if(d=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,d.test(n)){var y=d.exec(n);s=y[1],c=y[2],d=new RegExp(o),d.test(s)&&(n=s+e[c])}if(d=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,d.test(n)){var y=d.exec(n);s=y[1],c=y[2],d=new RegExp(o),d.test(s)&&(n=s+t[c])}if(d=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,v=/^(.+?)(s|t)(ion)$/,d.test(n)){var y=d.exec(n);s=y[1],d=new RegExp(a),d.test(s)&&(n=s)}else if(v.test(n)){var y=v.exec(n);s=y[1]+y[2],v=new RegExp(a),v.test(s)&&(n=s)}if(d=/^(.+?)e$/,d.test(n)){var y=d.exec(n);s=y[1],d=new RegExp(a),v=new RegExp(u),m=new RegExp("^"+i+r+"[^aeiouwxy]$"),(d.test(s)||v.test(s)&&!m.test(s))&&(n=s)}return d=/ll$/,v=new RegExp(a),d.test(n)&&v.test(n)&&(d=/.$/,n=n.replace(d,"")),"y"==p&&(n=p.toLowerCase()+n.substr(1)),n}}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.stopWordFilter=function(n){return-1===e.stopWordFilter.stopWords.indexOf(n)?n:void 0},e.stopWordFilter.stopWords=new e.SortedSet,e.stopWordFilter.stopWords.length=119,e.stopWordFilter.stopWords.elements=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenStore=function(){this.root={docs:{}},this.length=0},e.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},e.TokenStore.prototype.add=function(e,t,n){var n=n||this.root,r=e[0],i=e.slice(1);return r in n||(n[r]={docs:{}}),0===i.length?(n[r].docs[t.ref]=t,void (this.length+=1)):this.add(i,t,n[r])},e.TokenStore.prototype.has=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},e.TokenStore.prototype.getNode=function(e){if(!e)return{};for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return{};t=t[e[n]]}return t},e.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},e.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},e.TokenStore.prototype.remove=function(e,t){if(e){for(var n=this.root,r=0;r<e.length;r++){if(!(e[r]in n))return;n=n[e[r]]}delete n.docs[t]}},e.TokenStore.prototype.expand=function(e,t){var n=this.getNode(e),r=n.docs||{},t=t||[];return Object.keys(r).length&&t.push(e),Object.keys(n).forEach(function(n){"docs"!==n&&t.concat(this.expand(e+n,t))},this),t},e.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.lunr=t()}(this,function(){return e})}();(function(e,t){if(typeof exports==="object"&&exports){t(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],t)}else{t(e.Mustache={})}})(this,function(e){function r(e){return typeof e==="function"}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return s.call(e,t)}function a(e){return!o(u,e)}function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return f[e]})}function m(t,r){function m(){if(f&&!l){while(u.length)delete o[u.pop()]}else{u=[]}f=false;l=false}function x(e){if(typeof e==="string")e=e.split(h,2);if(!n(e)||e.length!==2)throw new Error("Invalid tags: "+e);w=new RegExp(i(e[0])+"\\s*");E=new RegExp("\\s*"+i(e[1]));S=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var s=[];var o=[];var u=[];var f=false;var l=false;var w,E,S;x(r||e.tags);var T=new b(t);var N,C,k,L,A,O;while(!T.eos()){N=T.pos;k=T.scanUntil(w);if(k){for(var M=0,_=k.length;M<_;++M){L=k.charAt(M);if(a(L)){u.push(o.length)}else{l=true}o.push(["text",L,N,N+1]);N+=1;if(L==="\n")m()}}if(!T.scan(w))break;f=true;C=T.scan(v)||"name";T.scan(c);if(C==="="){k=T.scanUntil(p);T.scan(p);T.scanUntil(E)}else if(C==="{"){k=T.scanUntil(S);T.scan(d);T.scanUntil(E);C="&"}else{k=T.scanUntil(E)}if(!T.scan(E))throw new Error("Unclosed tag at "+T.pos);A=[C,k,N,T.pos];o.push(A);if(C==="#"||C==="^"){s.push(A)}else if(C==="/"){O=s.pop();if(!O)throw new Error('Unopened section "'+k+'" at '+N);if(O[1]!==k)throw new Error('Unclosed section "'+O[1]+'" at '+N)}else if(C==="name"||C==="{"||C==="&"){l=true}else if(C==="="){x(k)}}O=s.pop();if(O)throw new Error('Unclosed section "'+O[1]+'" at '+T.pos);return y(g(o))}function g(e){var t=[];var n,r;for(var i=0,s=e.length;i<s;++i){n=e[i];if(n){if(n[0]==="text"&&r&&r[0]==="text"){r[1]+=n[1];r[3]=n[3]}else{t.push(n);r=n}}}return t}function y(e){var t=[];var n=t;var r=[];var i,s;for(var o=0,u=e.length;o<u;++o){i=e[o];switch(i[0]){case"#":case"^":n.push(i);r.push(i);n=i[4]=[];break;case"/":s=r.pop();s[5]=i[2];n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function b(e){this.string=e;this.tail=e;this.pos=0}function w(e,t){this.view=e==null?{}:e;this.cache={".":this.view};this.parent=t}function E(){this.cache={}}var t=Object.prototype.toString;var n=Array.isArray||function(e){return t.call(e)==="[object Array]"};var s=RegExp.prototype.test;var u=/\S/;var f={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};var c=/\s*/;var h=/\s+/;var p=/\s*=/;var d=/\s*\}/;var v=/#|\^|\/|>|\{|&|=|!/;b.prototype.eos=function(){return this.tail===""};b.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];this.tail=this.tail.substring(n.length);this.pos+=n.length;return n};b.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail;this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t);this.tail=this.tail.substring(t)}this.pos+=n.length;return n};w.prototype.push=function(e){return new w(e,this)};w.prototype.lookup=function(e){var t=this.cache;var n;if(e in t){n=t[e]}else{var i=this,s,o;while(i){if(e.indexOf(".")>0){n=i.view;s=e.split(".");o=0;while(n!=null&&o<s.length)n=n[s[o++]]}else{n=i.view[e]}if(n!=null)break;i=i.parent}t[e]=n}if(r(n))n=n.call(this.view);return n};E.prototype.clearCache=function(){this.cache={}};E.prototype.parse=function(e,t){var n=this.cache;var r=n[e];if(r==null)r=n[e]=m(e,t);return r};E.prototype.render=function(e,t,n){var r=this.parse(e);var i=t instanceof w?t:new w(t);return this.renderTokens(r,i,n,e)};E.prototype.renderTokens=function(t,i,s,o){function f(e){return a.render(e,i,s)}var u="";var a=this;var l,c;for(var h=0,p=t.length;h<p;++h){l=t[h];switch(l[0]){case"#":c=i.lookup(l[1]);if(!c)continue;if(n(c)){for(var d=0,v=c.length;d<v;++d){u+=this.renderTokens(l[4],i.push(c[d]),s,o)}}else if(typeof c==="object"||typeof c==="string"){u+=this.renderTokens(l[4],i.push(c),s,o)}else if(r(c)){if(typeof o!=="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(i.view,o.slice(l[3],l[5]),f);if(c!=null)u+=c}else{u+=this.renderTokens(l[4],i,s,o)}break;case"^":c=i.lookup(l[1]);if(!c||n(c)&&c.length===0)u+=this.renderTokens(l[4],i,s,o);break;case">":if(!s)continue;c=r(s)?s(l[1]):s[l[1]];if(c!=null)u+=this.renderTokens(this.parse(c),i,s,c);break;case"&":c=i.lookup(l[1]);if(c!=null)u+=c;break;case"name":c=i.lookup(l[1]);if(c!=null)u+=e.escape(c);break;case"text":u+=l[1];break}}return u};e.name="mustache.js";e.version="0.8.1";e.tags=["{{","}}"];var S=new E;e.clearCache=function(){return S.clearCache()};e.parse=function(e,t){return S.parse(e,t)};e.render=function(e,t,n){return S.render(e,t,n)};e.to_html=function(t,n,i,s){var o=e.render(t,n,i);if(r(s)){s(o)}else{return o}};e.escape=l;e.Scanner=b;e.Context=w;e.Writer=E});var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,r=function(e,t){e=String(e);t=t||2;while(e.length<t)e="0"+e;return e};return function(i,s,o){var u=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(i)=="[object String]"&&!/\d/.test(i)){s=i;i=undefined}i=i?new Date(i):new Date;if(isNaN(i))throw SyntaxError("invalid date");s=String(u.masks[s]||s||u.masks["default"]);if(s.slice(0,4)=="UTC:"){s=s.slice(4);o=true}var a=o?"getUTC":"get",f=i[a+"Date"](),l=i[a+"Day"](),c=i[a+"Month"](),h=i[a+"FullYear"](),p=i[a+"Hours"](),d=i[a+"Minutes"](),v=i[a+"Seconds"](),m=i[a+"Milliseconds"](),g=o?0:i.getTimezoneOffset(),y={d:f,dd:r(f),ddd:u.i18n.dayNames[l],dddd:u.i18n.dayNames[l+7],m:c+1,mm:r(c+1),mmm:u.i18n.monthNames[c],mmmm:u.i18n.monthNames[c+12],yy:String(h).slice(2),yyyy:h,h:p%12||12,hh:r(p%12||12),H:p,HH:r(p),M:d,MM:r(d),s:v,ss:r(v),l:r(m,3),L:r(m>99?Math.round(m/10):m),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:o?"UTC":(String(i).match(t)||[""]).pop().replace(n,""),o:(g>0?"-":"+")+r(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][f%10>3?0:(f%100-f%10!=10)*f%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(e,t){return dateFormat(this,e,t)};(function(e,t){"use strict";if(typeof exports==="object"){module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains"))}else if(typeof define==="function"&&define.amd){define(["./punycode","./IPv6","./SecondLevelDomains"],t)}else{e.URI=t(e.punycode,e.IPv6,e.SecondLevelDomains,e)}})(this,function(e,t,n,r){"use strict";function s(e,t){if(!(this instanceof s)){return new s(e,t)}if(e===undefined){if(typeof location!=="undefined"){e=location.href+""}else{e=""}}this.href(e);if(t!==undefined){return this.absoluteTo(t)}return this}function a(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(e){if(e===undefined){return"Undefined"}return String(Object.prototype.toString.call(e)).slice(8,-1)}function l(e){return f(e)==="Array"}function c(e,t){var n={};var r,i;if(l(t)){for(r=0,i=t.length;r<i;r++){n[t[r]]=true}}else{n[t]=true}for(r=0,i=e.length;r<i;r++){if(n[e[r]]!==undefined){e.splice(r,1);i--;r--}}return e}function h(e,t){var n,r;if(l(t)){for(n=0,r=t.length;n<r;n++){if(!h(e,t[n])){return false}}return true}var i=f(t);for(n=0,r=e.length;n<r;n++){if(i==="RegExp"){if(typeof e[n]==="string"&&e[n].match(t)){return true}}else if(e[n]===t){return true}}return false}function p(e,t){if(!l(e)||!l(t)){return false}if(e.length!==t.length){return false}e.sort();t.sort();for(var n=0,r=e.length;n<r;n++){if(e[n]!==t[n]){return false}}return true}function d(e){return escape(e)}function v(e){return encodeURIComponent(e).replace(/[!'()*]/g,d).replace(/\*/g,"%2A")}var i=r&&r.URI;s.version="1.13.2";var o=s.prototype;var u=Object.prototype.hasOwnProperty;s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}};s.duplicateQueryParameters=false;s.escapeQuerySpace=true;s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;s.idn_expression=/[^a-z0-9\.-]/i;s.punycode_expression=/(xn--)/i;s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig;s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/};s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};s.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};s.getDomAttribute=function(e){if(!e||!e.nodeName){return undefined}var t=e.nodeName.toLowerCase();if(t==="input"&&e.type!=="image"){return undefined}return s.domAttributes[t]};s.encode=v;s.decode=decodeURIComponent;s.iso8859=function(){s.encode=escape;s.decode=unescape};s.unicode=function(){s.encode=v;s.decode=decodeURIComponent};s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};s.encodeQuery=function(e,t){var n=s.encode(e+"");if(t===undefined){t=s.escapeQuerySpace}return t?n.replace(/%20/g,"+"):n};s.decodeQuery=function(e,t){e+="";if(t===undefined){t=s.escapeQuerySpace}try{return s.decode(t?e.replace(/\+/g,"%20"):e)}catch(n){return e}};s.recodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++){t[n]=s.encodePathSegment(s.decode(t[n]))}return t.join("/")};s.decodePath=function(e){var t=(e+"").split("/");for(var n=0,r=t.length;n<r;n++){t[n]=s.decodePathSegment(t[n])}return t.join("/")};var m={encode:"encode",decode:"decode"};var g;var y=function(e,t){return function(n){return s[t](n+"").replace(s.characters[e][t].expression,function(n){return s.characters[e][t].map[n]})}};for(g in m){s[g+"PathSegment"]=y("pathname",m[g])}s.encodeReserved=y("reserved","encode");s.parse=function(e,t){var n;if(!t){t={}}n=e.indexOf("#");if(n>-1){t.fragment=e.substring(n+1)||null;e=e.substring(0,n)}n=e.indexOf("?");if(n>-1){t.query=e.substring(n+1)||null;e=e.substring(0,n)}if(e.substring(0,2)==="//"){t.protocol=null;e=e.substring(2);e=s.parseAuthority(e,t)}else{n=e.indexOf(":");if(n>-1){t.protocol=e.substring(0,n)||null;if(t.protocol&&!t.protocol.match(s.protocol_expression)){t.protocol=undefined}else if(t.protocol==="file"){e=e.substring(n+3)}else if(e.substring(n+1,n+3)==="//"){e=e.substring(n+3);e=s.parseAuthority(e,t)}else{e=e.substring(n+1);t.urn=true}}}t.path=e;return t};s.parseHost=function(e,t){var n=e.indexOf("/");var r;var i;if(n===-1){n=e.length}if(e.charAt(0)==="["){r=e.indexOf("]");t.hostname=e.substring(1,r)||null;t.port=e.substring(r+2,n)||null;if(t.port==="/"){t.port=null}}else if(e.indexOf(":")!==e.lastIndexOf(":")){t.hostname=e.substring(0,n)||null;t.port=null}else{i=e.substring(0,n).split(":");t.hostname=i[0]||null;t.port=i[1]||null}if(t.hostname&&e.substring(n).charAt(0)!=="/"){n++;e="/"+e}return e.substring(n)||"/"};s.parseAuthority=function(e,t){e=s.parseUserinfo(e,t);return s.parseHost(e,t)};s.parseUserinfo=function(e,t){var n=e.indexOf("/");var r=n>-1?e.lastIndexOf("@",n):e.indexOf("@");var i;if(r>-1&&(n===-1||r<n)){i=e.substring(0,r).split(":");t.username=i[0]?s.decode(i[0]):null;i.shift();t.password=i[0]?s.decode(i.join(":")):null;e=e.substring(r+1)}else{t.username=null;t.password=null}return e};s.parseQuery=function(e,t){if(!e){return{}}e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!e){return{}}var n={};var r=e.split("&");var i=r.length;var o,u,a;for(var f=0;f<i;f++){o=r[f].split("=");u=s.decodeQuery(o.shift(),t);a=o.length?s.decodeQuery(o.join("="),t):null;if(n[u]){if(typeof n[u]==="string"){n[u]=[n[u]]}n[u].push(a)}else{n[u]=a}}return n};s.build=function(e){var t="";if(e.protocol){t+=e.protocol+":"}if(!e.urn&&(t||e.hostname)){t+="//"}t+=s.buildAuthority(e)||"";if(typeof e.path==="string"){if(e.path.charAt(0)!=="/"&&typeof e.hostname==="string"){t+="/"}t+=e.path}if(typeof e.query==="string"&&e.query){t+="?"+e.query}if(typeof e.fragment==="string"&&e.fragment){t+="#"+e.fragment}return t};s.buildHost=function(e){var t="";if(!e.hostname){return""}else if(s.ip6_expression.test(e.hostname)){t+="["+e.hostname+"]"}else{t+=e.hostname}if(e.port){t+=":"+e.port}return t};s.buildAuthority=function(e){return s.buildUserinfo(e)+s.buildHost(e)};s.buildUserinfo=function(e){var t="";if(e.username){t+=s.encode(e.username);if(e.password){t+=":"+s.encode(e.password)}t+="@"}return t};s.buildQuery=function(e,t,n){var r="";var i,o,a,f;for(o in e){if(u.call(e,o)&&o){if(l(e[o])){i={};for(a=0,f=e[o].length;a<f;a++){if(e[o][a]!==undefined&&i[e[o][a]+""]===undefined){r+="&"+s.buildQueryParameter(o,e[o][a],n);if(t!==true){i[e[o][a]+""]=true}}}}else if(e[o]!==undefined){r+="&"+s.buildQueryParameter(o,e[o],n)}}}return r.substring(1)};s.buildQueryParameter=function(e,t,n){return s.encodeQuery(e,n)+(t!==null?"="+s.encodeQuery(t,n):"")};s.addQuery=function(e,t,n){if(typeof t==="object"){for(var r in t){if(u.call(t,r)){s.addQuery(e,r,t[r])}}}else if(typeof t==="string"){if(e[t]===undefined){e[t]=n;return}else if(typeof e[t]==="string"){e[t]=[e[t]]}if(!l(n)){n=[n]}e[t]=e[t].concat(n)}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}};s.removeQuery=function(e,t,n){var r,i,o;if(l(t)){for(r=0,i=t.length;r<i;r++){e[t[r]]=undefined}}else if(typeof t==="object"){for(o in t){if(u.call(t,o)){s.removeQuery(e,o,t[o])}}}else if(typeof t==="string"){if(n!==undefined){if(e[t]===n){e[t]=undefined}else if(l(e[t])){e[t]=c(e[t],n)}}else{e[t]=undefined}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")}};s.hasQuery=function(e,t,n,r){if(typeof t==="object"){for(var i in t){if(u.call(t,i)){if(!s.hasQuery(e,i,t[i])){return false}}}return true}else if(typeof t!=="string"){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter")}switch(f(n)){case"Undefined":return t in e;case"Boolean":var o=Boolean(l(e[t])?e[t].length:e[t]);return n===o;case"Function":return!!n(e[t],t,e);case"Array":if(!l(e[t])){return false}var a=r?h:p;return a(e[t],n);case"RegExp":if(!l(e[t])){return Boolean(e[t]&&e[t].match(n))}if(!r){return false}return h(e[t],n);case"Number":n=String(n);case"String":if(!l(e[t])){return e[t]===n}if(!r){return false}return h(e[t],n);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};s.commonPath=function(e,t){var n=Math.min(e.length,t.length);var r;for(r=0;r<n;r++){if(e.charAt(r)!==t.charAt(r)){r--;break}}if(r<1){return e.charAt(0)===t.charAt(0)&&e.charAt(0)==="/"?"/":""}if(e.charAt(r)!=="/"||t.charAt(r)!=="/"){r=e.substring(0,r).lastIndexOf("/")}return e.substring(0,r+1)};s.withinString=function(e,t,n){n||(n={});var r=n.start||s.findUri.start;var i=n.end||s.findUri.end;var o=n.trim||s.findUri.trim;var u=/[a-z0-9-]=["']?$/i;r.lastIndex=0;while(true){var a=r.exec(e);if(!a){break}var f=a.index;if(n.ignoreHtml){var l=e.slice(Math.max(f-3,0),f);if(l&&u.test(l)){continue}}var c=f+e.slice(f).search(i);var h=e.slice(f,c).replace(o,"");if(n.ignore&&n.ignore.test(h)){continue}c=f+h.length;var p=t(h,f,c,e);e=e.slice(0,f)+p+e.slice(c);r.lastIndex=f+p.length}r.lastIndex=0;return e};s.ensureValidHostname=function(t){if(t.match(s.invalid_hostname_characters)){if(!e){throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available')}if(e.toASCII(t).match(s.invalid_hostname_characters)){throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}}};s.noConflict=function(e){if(e){var t={URI:this.noConflict()};if(r.URITemplate&&typeof r.URITemplate.noConflict==="function"){t.URITemplate=r.URITemplate.noConflict()}if(r.IPv6&&typeof r.IPv6.noConflict==="function"){t.IPv6=r.IPv6.noConflict()}if(r.SecondLevelDomains&&typeof r.SecondLevelDomains.noConflict==="function"){t.SecondLevelDomains=r.SecondLevelDomains.noConflict()}return t}else if(r.URI===this){r.URI=i}return this};o.build=function(e){if(e===true){this._deferred_build=true}else if(e===undefined||this._deferred_build){this._string=s.build(this._parts);this._deferred_build=false}return this};o.clone=function(){return new s(this)};o.valueOf=o.toString=function(){return this.build(false)._string};m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};y=function(e){return function(t,n){if(t===undefined){return this._parts[e]||""}else{this._parts[e]=t||null;this.build(!n);return this}}};for(g in m){o[g]=y(m[g])}m={query:"?",fragment:"#"};y=function(e,t){return function(n,r){if(n===undefined){return this._parts[e]||""}else{if(n!==null){n=n+"";if(n.charAt(0)===t){n=n.substring(1)}}this._parts[e]=n;this.build(!r);return this}}};for(g in m){o[g]=y(g,m[g])}m={search:["?","query"],hash:["#","fragment"]};y=function(e,t){return function(n,r){var i=this[e](n,r);return typeof i==="string"&&i.length?t+i:i}};for(g in m){o[g]=y(m[g][1],m[g][0])}o.pathname=function(e,t){if(e===undefined||e===true){var n=this._parts.path||(this._parts.hostname?"/":"");return e?s.decodePath(n):n}else{this._parts.path=e?s.recodePath(e):"/";this.build(!t);return this}};o.path=o.pathname;o.href=function(e,t){var n;if(e===undefined){return this.toString()}this._string="";this._parts=s._parts();var r=e instanceof s;var i=typeof e==="object"&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=s.getDomAttribute(e);e=e[o]||"";i=false}if(!r&&i&&e.pathname!==undefined){e=e.toString()}if(typeof e==="string"){this._parts=s.parse(e,this._parts)}else if(r||i){var a=r?e._parts:e;for(n in a){if(u.call(this._parts,n)){this._parts[n]=a[n]}}}else{throw new TypeError("invalid input")}this.build(!t);return this};o.is=function(e){var t=false;var r=false;var i=false;var o=false;var u=false;var a=false;var f=false;var l=!this._parts.urn;if(this._parts.hostname){l=false;r=s.ip4_expression.test(this._parts.hostname);i=s.ip6_expression.test(this._parts.hostname);t=r||i;o=!t;u=o&&n&&n.has(this._parts.hostname);a=o&&s.idn_expression.test(this._parts.hostname);f=o&&s.punycode_expression.test(this._parts.hostname)}switch(e.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return o;case"sld":return u;case"ip":return t;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return a;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return f}return null};var b=o.protocol;var w=o.port;var E=o.hostname;o.protocol=function(e,t){if(e!==undefined){if(e){e=e.replace(/:(\/\/)?$/,"");if(!e.match(s.protocol_expression)){throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}}}return b.call(this,e,t)};o.scheme=o.protocol;o.port=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e!==undefined){if(e===0){e=null}if(e){e+="";if(e.charAt(0)===":"){e=e.substring(1)}if(e.match(/[^0-9]/)){throw new TypeError('Port "'+e+'" contains characters other than [0-9]')}}}return w.call(this,e,t)};o.hostname=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e!==undefined){var n={};s.parseHost(e,n);e=n.hostname}return E.call(this,e,t)};o.host=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){return this._parts.hostname?s.buildHost(this._parts):""}else{s.parseHost(e,this._parts);this.build(!t);return this}};o.authority=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){return this._parts.hostname?s.buildAuthority(this._parts):""}else{s.parseAuthority(e,this._parts);this.build(!t);return this}};o.userinfo=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){if(!this._parts.username){return""}var n=s.buildUserinfo(this._parts);return n.substring(0,n.length-1)}else{if(e[e.length-1]!=="@"){e+="@"}s.parseUserinfo(e,this._parts);this.build(!t);return this}};o.resource=function(e,t){var n;if(e===undefined){return this.path()+this.search()+this.hash()}n=s.parse(e);this._parts.path=n.path;this._parts.query=n.query;this._parts.fragment=n.fragment;this.build(!t);return this};o.subdomain=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){if(!this._parts.hostname||this.is("IP")){return""}var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}else{var r=this._parts.hostname.length-this.domain().length;var i=this._parts.hostname.substring(0,r);var o=new RegExp("^"+a(i));if(e&&e.charAt(e.length-1)!=="."){e+="."}if(e){s.ensureValidHostname(e)}this._parts.hostname=this._parts.hostname.replace(o,e);this.build(!t);return this}};o.domain=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(typeof e==="boolean"){t=e;e=undefined}if(e===undefined){if(!this._parts.hostname||this.is("IP")){return""}var n=this._parts.hostname.match(/\./g);if(n&&n.length<2){return this._parts.hostname}var r=this._parts.hostname.length-this.tld(t).length-1;r=this._parts.hostname.lastIndexOf(".",r-1)+1;return this._parts.hostname.substring(r)||""}else{if(!e){throw new TypeError("cannot set domain empty")}s.ensureValidHostname(e);if(!this._parts.hostname||this.is("IP")){this._parts.hostname=e}else{var i=new RegExp(a(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,e)}this.build(!t);return this}};o.tld=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(typeof e==="boolean"){t=e;e=undefined}if(e===undefined){if(!this._parts.hostname||this.is("IP")){return""}var r=this._parts.hostname.lastIndexOf(".");var i=this._parts.hostname.substring(r+1);if(t!==true&&n&&n.list[i.toLowerCase()]){return n.get(this._parts.hostname)||i}return i}else{var s;if(!e){throw new TypeError("cannot set TLD empty")}else if(e.match(/[^a-zA-Z0-9-]/)){if(n&&n.is(e)){s=new RegExp(a(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(s,e)}else{throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]')}}else if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}else{s=new RegExp(a(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(s,e)}this.build(!t);return this}};o.directory=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined||e===true){if(!this._parts.path&&!this._parts.hostname){return""}if(this._parts.path==="/"){return"/"}var n=this._parts.path.length-this.filename().length-1;var r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return e?s.decodePath(r):r}else{var i=this._parts.path.length-this.filename().length;var o=this._parts.path.substring(0,i);var u=new RegExp("^"+a(o));if(!this.is("relative")){if(!e){e="/"}if(e.charAt(0)!=="/"){e="/"+e}}if(e&&e.charAt(e.length-1)!=="/"){e+="/"}e=s.recodePath(e);this._parts.path=this._parts.path.replace(u,e);this.build(!t);return this}};o.filename=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined||e===true){if(!this._parts.path||this._parts.path==="/"){return""}var n=this._parts.path.lastIndexOf("/");var r=this._parts.path.substring(n+1);return e?s.decodePathSegment(r):r}else{var i=false;if(e.charAt(0)==="/"){e=e.substring(1)}if(e.match(/\.?\//)){i=true}var o=new RegExp(a(this.filename())+"$");e=s.recodePath(e);this._parts.path=this._parts.path.replace(o,e);if(i){this.normalizePath(t)}else{this.build(!t)}return this}};o.suffix=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined||e===true){if(!this._parts.path||this._parts.path==="/"){return""}var n=this.filename();var r=n.lastIndexOf(".");var i,o;if(r===-1){return""}i=n.substring(r+1);o=/^[a-z0-9%]+$/i.test(i)?i:"";return e?s.decodePathSegment(o):o}else{if(e.charAt(0)==="."){e=e.substring(1)}var u=this.suffix();var f;if(!u){if(!e){return this}this._parts.path+="."+s.recodePath(e)}else if(!e){f=new RegExp(a("."+u)+"$")}else{f=new RegExp(a(u)+"$")}if(f){e=s.recodePath(e);this._parts.path=this._parts.path.replace(f,e)}this.build(!t);return this}};o.segment=function(e,t,n){var r=this._parts.urn?":":"/";var i=this.path();var s=i.substring(0,1)==="/";var o=i.split(r);if(e!==undefined&&typeof e!=="number"){n=t;t=e;e=undefined}if(e!==undefined&&typeof e!=="number"){throw new Error('Bad segment "'+e+'", must be 0-based integer')}if(s){o.shift()}if(e<0){e=Math.max(o.length+e,0)}if(t===undefined){return e===undefined?o:o[e]}else if(e===null||o[e]===undefined){if(l(t)){o=[];for(var u=0,a=t.length;u<a;u++){if(!t[u].length&&(!o.length||!o[o.length-1].length)){continue}if(o.length&&!o[o.length-1].length){o.pop()}o.push(t[u])}}else if(t||typeof t==="string"){if(o[o.length-1]===""){o[o.length-1]=t}else{o.push(t)}}}else{if(t||typeof t==="string"&&t.length){o[e]=t}else{o.splice(e,1)}}if(s){o.unshift("")}return this.path(o.join(r),n)};o.segmentCoded=function(e,t,n){var r,i,o;if(typeof e!=="number"){n=t;t=e;e=undefined}if(t===undefined){r=this.segment(e,t,n);if(!l(r)){r=r!==undefined?s.decode(r):undefined}else{for(i=0,o=r.length;i<o;i++){r[i]=s.decode(r[i])}}return r}if(!l(t)){t=typeof t==="string"?s.encode(t):t}else{for(i=0,o=t.length;i<o;i++){t[i]=s.decode(t[i])}}return this.segment(e,t,n)};var S=o.query;o.query=function(e,t){if(e===true){return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)}else if(typeof e==="function"){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);var r=e.call(this,n);this._parts.query=s.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!t);return this}else if(e!==undefined&&typeof e!=="string"){this._parts.query=s.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!t);return this}else{return S.call(this,e,t)}};o.setQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e==="object"){for(var i in e){if(u.call(e,i)){r[i]=e[i]}}}else if(typeof e==="string"){r[e]=t!==undefined?t:null}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof e!=="string"){n=t}this.build(!n);return this};o.addQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);s.addQuery(r,e,t===undefined?null:t);this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof e!=="string"){n=t}this.build(!n);return this};o.removeQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);s.removeQuery(r,e,t);this._parts.query=s.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof e!=="string"){n=t}this.build(!n);return this};o.hasQuery=function(e,t,n){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(r,e,t,n)};o.setSearch=o.setQuery;o.addSearch=o.addQuery;o.removeSearch=o.removeQuery;o.hasSearch=o.hasQuery;o.normalize=function(){if(this._parts.urn){return this.normalizeProtocol(false).normalizeQuery(false).normalizeFragment(false).build()}return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()};o.normalizeProtocol=function(e){if(typeof this._parts.protocol==="string"){this._parts.protocol=this._parts.protocol.toLowerCase();this.build(!e)}return this};o.normalizeHostname=function(n){if(this._parts.hostname){if(this.is("IDN")&&e){this._parts.hostname=e.toASCII(this._parts.hostname)}else if(this.is("IPv6")&&t){this._parts.hostname=t.best(this._parts.hostname)}this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!n)}return this};o.normalizePort=function(e){if(typeof this._parts.protocol==="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]){this._parts.port=null;this.build(!e)}return this};o.normalizePath=function(e){if(this._parts.urn){return this}if(!this._parts.path||this._parts.path==="/"){return this}var t;var n=this._parts.path;var r="";var i,o;if(n.charAt(0)!=="/"){t=true;n="/"+n}n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");if(t){r=n.substring(1).match(/^(\.\.\/)+/)||"";if(r){r=r[0]}}while(true){i=n.indexOf("/..");if(i===-1){break}else if(i===0){n=n.substring(3);continue}o=n.substring(0,i).lastIndexOf("/");if(o===-1){o=i}n=n.substring(0,o)+n.substring(i+3)}if(t&&this.is("relative")){n=r+n.substring(1)}n=s.recodePath(n);this._parts.path=n;this.build(!e);return this};o.normalizePathname=o.normalizePath;o.normalizeQuery=function(e){if(typeof this._parts.query==="string"){if(!this._parts.query.length){this._parts.query=null}else{this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace))}this.build(!e)}return this};o.normalizeFragment=function(e){if(!this._parts.fragment){this._parts.fragment=null;this.build(!e)}return this};o.normalizeSearch=o.normalizeQuery;o.normalizeHash=o.normalizeFragment;o.iso8859=function(){var e=s.encode;var t=s.decode;s.encode=escape;s.decode=decodeURIComponent;this.normalize();s.encode=e;s.decode=t;return this};o.unicode=function(){var e=s.encode;var t=s.decode;s.encode=v;s.decode=unescape;this.normalize();s.encode=e;s.decode=t;return this};o.readable=function(){var t=this.clone();t.username("").password("").normalize();var n="";if(t._parts.protocol){n+=t._parts.protocol+"://"}if(t._parts.hostname){if(t.is("punycode")&&e){n+=e.toUnicode(t._parts.hostname);if(t._parts.port){n+=":"+t._parts.port}}else{n+=t.host()}}if(t._parts.hostname&&t._parts.path&&t._parts.path.charAt(0)!=="/"){n+="/"}n+=t.path(true);if(t._parts.query){var r="";for(var i=0,o=t._parts.query.split("&"),u=o.length;i<u;i++){var a=(o[i]||"").split("=");r+="&"+s.decodeQuery(a[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");if(a[1]!==undefined){r+="="+s.decodeQuery(a[1],this._parts.escapeQuerySpace).replace(/&/g,"%26")}}n+="?"+r.substring(1)}n+=s.decodeQuery(t.hash(),true);return n};o.absoluteTo=function(e){var t=this.clone();var n=["protocol","username","password","hostname","port"];var r,i,o;if(this._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}if(!(e instanceof s)){e=new s(e)}if(!t._parts.protocol){t._parts.protocol=e._parts.protocol}if(this._parts.hostname){return t}for(i=0;o=n[i];i++){t._parts[o]=e._parts[o]}if(!t._parts.path){t._parts.path=e._parts.path;if(!t._parts.query){t._parts.query=e._parts.query}}else if(t._parts.path.substring(-2)===".."){t._parts.path+="/"}if(t.path().charAt(0)!=="/"){r=e.directory();t._parts.path=(r?r+"/":"")+t._parts.path;t.normalizePath()}t.build();return t};o.relativeTo=function(e){var t=this.clone().normalize();var n,r,i,o,u;if(t._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}e=(new s(e)).normalize();n=t._parts;r=e._parts;o=t.path();u=e.path();if(o.charAt(0)!=="/"){throw new Error("URI is already relative")}if(u.charAt(0)!=="/"){throw new Error("Cannot calculate a URI relative to another relative URI")}if(n.protocol===r.protocol){n.protocol=null}if(n.username!==r.username||n.password!==r.password){return t.build()}if(n.protocol!==null||n.username!==null||n.password!==null){return t.build()}if(n.hostname===r.hostname&&n.port===r.port){n.hostname=null;n.port=null}else{return t.build()}if(o===u){n.path="";return t.build()}i=s.commonPath(t.path(),e.path());if(!i){return t.build()}var a=r.path.substring(i.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");n.path=a+n.path.substring(i.length);return t.build()};o.equals=function(e){var t=this.clone();var n=new s(e);var r={};var i={};var o={};var a,f,c;t.normalize();n.normalize();if(t.toString()===n.toString()){return true}a=t.query();f=n.query();t.query("");n.query("");if(t.toString()!==n.toString()){return false}if(a.length!==f.length){return false}r=s.parseQuery(a,this._parts.escapeQuerySpace);i=s.parseQuery(f,this._parts.escapeQuerySpace);for(c in r){if(u.call(r,c)){if(!l(r[c])){if(r[c]!==i[c]){return false}}else if(!p(r[c],i[c])){return false}o[c]=true}}for(c in i){if(u.call(i,c)){if(!o[c]){return false}}}return true};o.duplicateQueryParameters=function(e){this._parts.duplicateQueryParameters=!!e;return this};o.escapeQuerySpace=function(e){this._parts.escapeQuerySpace=!!e;return this};return s});(function(e){var t=function(e){var t;var n=Array.prototype.slice;return function(){var r=n.call(arguments),i=this;clearTimeout(t);t=setTimeout(function(){e.apply(i,r)},100)}};var n=function(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])};var r=function(){function r(t,n){this.$elem=t;this.$results=e(n.results);this.$entries=e(n.entries,this.$results);this.indexDataUrl=n.indexUrl;this.index=this.createIndex();this.template=this.compileTemplate(e(n.template));this.initialize()}r.prototype.initialize=function(){var e=this;this.loadIndexData(function(t){e.populateIndex(t);e.populateSearchFromQuery();e.bindKeypress()})};r.prototype.createIndex=function(){return lunr(function(){this.field("title",{boost:10});this.field("body");this.ref("id")})};r.prototype.compileTemplate=function(e){var t=e.text();Mustache.parse(t);return function(e,n){return Mustache.render(t,e,n)}};r.prototype.loadIndexData=function(t){e.getJSON(this.indexDataUrl,t)};r.prototype.populateIndex=function(t){var n=this.index;this.entries=e.map(t.entries,this.createEntry);e.each(this.entries,function(e,t){n.add(t)})};r.prototype.createEntry=function(t,r){var i=e.extend({id:r+1},t);if(t.date){e.extend(i,{date:n(t.date),pubdate:function(){return dateFormat(n(t.date),"yyyy-mm-dd")},displaydate:function(){return dateFormat(n(t.date),"mmm dd, yyyy")}})}return i};r.prototype.bindKeypress=function(){var e=this;var n=this.$elem.val();this.$elem.bind("keyup",t(function(){var t=e.$elem.val();if(t!==n){e.search(t)}n=t}))};r.prototype.search=function(t){var n=this.entries;if(t.length<2){this.$results.hide();this.$entries.empty()}else{var r=e.map(this.index.search(t),function(t){return e.grep(n,function(e){return e.id===parseInt(t.ref,10)})[0]});this.displayResults(r)}};r.prototype.displayResults=function(e){var t=this.$entries,n=this.$results;t.empty();if(e.length===0){t.append("<p>Nothing found.</p>")}else{t.append(this.template({entries:e}))}n.show()};r.prototype.populateSearchFromQuery=function(){var e=new URI(window.location.search.toString());var t=e.search(true);if(t.hasOwnProperty("q")){this.$elem.val(t.q);this.search(t.q.toString())}};return r}();e.fn.lunrSearch=function(t){t=e.extend({},e.fn.lunrSearch.defaults,t);new r(this,t);return this};e.fn.lunrSearch.defaults={indexUrl:"/search.json",results:"#search-results",entries:".entries",template:"#search-results-template"}})(jQuery)